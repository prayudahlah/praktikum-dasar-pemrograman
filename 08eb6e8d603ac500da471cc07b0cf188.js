ace.define("ace/ext/code_lens",["require","exports","module","ace/lib/event","ace/lib/lang","ace/lib/dom","ace/editor","ace/config"],function(e,n,o){"use strict";var t=e("../lib/event"),r=e("../lib/lang"),i=e("../lib/dom");function s(e,n){if(e&n.CHANGE_LINES||e&n.CHANGE_FULL||e&n.CHANGE_SCROLL||e&n.CHANGE_TEXT){var o,t,r=n.session,s=n.session.lineWidgets,a=n.$textLayer,c=a.$lenses;if(!s){if(c){;(t=(o=n.$textLayer).$lenses)&&t.forEach(function(e){e.remove()}),o.$lenses=null}return}var l=n.$textLayer.$lines.cells,d=n.layerConfig,u=n.$padding;!c&&(c=a.$lenses=[]);for(var f=0,g=0;g<l.length;g++){var p=l[g].row,L=s[p],v=L&&L.lenses;if(v&&v.length){var h=c[f];!h&&(h=c[f]=i.buildDom(["div",{class:"ace_codeLens"}],n.container)),h.style.height=d.lineHeight+"px",f++;for(var m=0;m<v.length;m++){var C=h.childNodes[2*m];!C&&(0!=m&&h.appendChild(i.createTextNode("\xa0|\xa0")),C=i.buildDom(["a"],h)),C.textContent=v[m].title,C.lensCommand=v[m]}for(;h.childNodes.length>2*m-1;)h.lastChild.remove();var $=n.$cursorLayer.getPixelPosition({row:p,column:0},!0).top-d.lineHeight*L.rowsAbove-d.offset;h.style.top=$+"px";var x=n.gutterWidth,b=r.getLine(p).search(/\S|$/);-1==b&&(b=0),x+=b*d.characterWidth,h.style.paddingLeft=u+x+"px"}}for(;f<c.length;)c.pop().remove()}}n.setLenses=function(e,n){var o=Number.MAX_VALUE;return!function(e){if(e.lineWidgets){var n=e.widgetManager;e.lineWidgets.forEach(function(e){e&&e.lenses&&n.removeLineWidget(e)})}}(e),n&&n.forEach(function(n){var t=n.start.row,r=n.start.column,i=e.lineWidgets&&e.lineWidgets[t];(!i||!i.lenses)&&(i=e.widgetManager.$registerLineWidget({rowCount:1,rowsAbove:1,row:t,column:r,lenses:[]})),i.lenses.push(n.command),t<o&&(o=t)}),e._emit("changeFold",{data:{start:{row:o}}}),o};n.registerCodeLensProvider=function(e,n){e.setOption("enableCodeLens",!0),e.codeLensProviders.push(n),e.$updateLensesOnInput()},n.clear=function(e){n.setLenses(e,null)};var a=e("../editor").Editor;e("../config").defineOptions(a.prototype,"editor",{enableCodeLens:{set:function(e){var o,i,a;if(e){;o=this,o.codeLensProviders=[],o.renderer.on("afterRender",s),o.$codeLensClickHandler||(o.$codeLensClickHandler=function(e){var n=e.target.lensCommand;n&&(o.execCommand(n.id,n.arguments),o._emit("codeLensClick",e))},t.addListener(o.container,"click",o.$codeLensClickHandler,o)),o.$updateLenses=function(){var e=o.session;if(e){var t=o.codeLensProviders.length,r=[];o.codeLensProviders.forEach(function(i){i.provideCodeLenses(e,function(i,s){!i&&(s.forEach(function(e){r.push(e)}),0==--t&&function(){var t=e.selection.cursor,i=e.documentToScreenRow(t),s=e.getScrollTop(),a=n.setLenses(e,r),c=e.$undoManager&&e.$undoManager.$lastDelta;if(!c||"remove"!=c.action||!(c.lines.length>1)){var l=e.documentToScreenRow(t),d=o.renderer.layerConfig.lineHeight,u=e.getScrollTop()+(l-i)*d;0==a&&s<d/4&&s>-d/4&&(u=-d),e.setScrollTop(u)}}())})})}},i=r.delayedCall(o.$updateLenses),o.$updateLensesOnInput=function(){i.delay(250)},o.on("input",o.$updateLensesOnInput)}else{;a=this,a.off("input",a.$updateLensesOnInput),a.renderer.off("afterRender",s),a.$codeLensClickHandler&&a.container.removeEventListener("click",a.$codeLensClickHandler)}}}}),i.importCssString("\n.ace_codeLens {\n    position: absolute;\n    color: #aaa;\n    font-size: 88%;\n    background: inherit;\n    width: 100%;\n    display: flex;\n    align-items: flex-end;\n    pointer-events: none;\n}\n.ace_codeLens > a {\n    cursor: pointer;\n    pointer-events: auto;\n}\n.ace_codeLens > a:hover {\n    color: #0000ff;\n    text-decoration: underline;\n}\n.ace_dark > .ace_codeLens > a:hover {\n    color: #4e94ce;\n}\n","codelense.css",!1)}),ace.require(["ace/ext/code_lens"],function(e){"object"==typeof module&&"object"==typeof exports&&module&&(module.exports=e)});